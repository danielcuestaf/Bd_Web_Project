<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Actualizar_BD</title>
    <link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />

    <link type="text/css" rel="stylesheet" href="css/style.css" />


    <!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

    <meta name="robots" content="noindex, follow">
</head>

<body>
    <div class="panel panel-default">
        <!-- Default panel contents -->
        <div class="panel-heading">
            <h1 class="text-center">Tabla de Resultados</h1>
        </div>
        <div class="panel-body">
            <form class="form-inline">
                <div class="form-group">
                    <label class="sr-only" for="documento">Documento</label>
                    <input type="number" class="form-control" id="documento" placeholder="Documento" name="documento">
                </div>
                <div class="form-group">
                    <span class="form-label">Tipo</span>
                    <select class="form-control" name="tipoDoc">
                        <option value="CC">Cedula</option>
                        <option value="TI">Tarjeta de Identidad</option>
                        <option value="TE">Tarjeta de Extranjeria</option>
                        <option value="CE">Cedula de Extranjeria</option>
                        <option value="NIT">Nit</option>
                        <option value="PAS">Pasaporte</option>
                    </select>
                    <span class="select-arrow"></span>
                </div>
                <button type="submit" class="btn btn-default">Buscar</button>
            </form>
        </div>

        <!-- Table -->
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Documento</th>
                    <th>Tipo</th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Direccion</th>
                    <th>Correo</th>
                    <th>Celular</th>
                </tr>
            </thead>
            <tbody>
                <tr class="info">
                    <td>1193428015</td>
                    <td>cc</td>
                    <td>Juan</td>
                    <td>Perez</td>
                    <td>cr 34</td>
                    <td>jnP@c.om</td>
                    <td>225</td>
                </tr>
                <tr>
                    <td>123</td>
                    <td>cc</td>
                    <td>Juan</td>
                    <td>Perez</td>
                    <td>cr 34</td>
                    <td>jnP@c.om</td>
                    <td>225</td>
                </tr>
                <tr class="info">
                    <td>1193428015</td>
                    <td>cc</td>
                    <td>Juan</td>
                    <td>Perez</td>
                    <td>cr 34</td>
                    <td>jnP@c.om</td>
                    <td>225</td>
                </tr>
            </tbody>
        </table>
    </div>
    <script src="./js/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script>
        // Handler para el evento de respuesta de la petici贸n
        document.querySelector("form").addEventListener("submit", function (e) {
            // Enviar la petici贸n al servidor
            const datos = new FormData(document.querySelector("form"))
            const data = {
                nombre: datos.get("nombre"),
                nDoc: datos.get("nDoc"),
                tipoDoc: datos.get("tipoDoc"),
                apellido: datos.get("apellido"),
                direccion: datos.get("direccion"),
                correo: datos.get("correo"),
                celular: datos.get("celular")

            };
            const jsonData = JSON.stringify(data);

            fetch("http://localhost:3000/api/personas", {
                method: "GET",
                body: jsonData,
                headers: {
                    'Content-Type': 'application/json'
                }
            })
                .then(function (response) {
                    // Comprobar el estatus de la respuesta
                    if (response.status === 400) {
                        //alert("informaci贸n faltante");
                        $('#alerta-d').show();
                    } else if (response.status === 409) {
                        //alert("Entrada duplicada, el registro ya existe.");
                        $('#alerta-w').show();
                    } else if (response.status === 201) {
                        //alert("Persona creada correctamente");
                        $('#alerta-s').show();
                    }
                })
                .catch(function (error) {
                    alert("Error en la petici贸n");
                });
            e.preventDefault();
        });
    </script>

</body>

</html>