<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Actualizar_BD</title>
    <link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />

    <link type="text/css" rel="stylesheet" href="css/style.css" />


    <!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

    <meta name="robots" content="noindex, follow">
</head>

<body>
    <div class="panel panel-default">
        <!-- Default panel contents -->
        <div class="panel-heading">
            <h1 class="text-center">Tabla de Resultados</h1>
        </div>
        <div class="panel-body">
            <form class="form-inline">
                <div class="form-group">
                    <label class="sr-only" for="documento">Documento</label>
                    <input type="number" class="form-control" id="documento" placeholder="Documento" name="documento">
                </div>
                <div class="form-group">
                    <span class="form-label">Tipo</span>
                    <select id="tipos" class="form-control" name="tipoDoc"></select>
                    <span class="select-arrow"></span>
                </div>
                <button type="submit" class="btn btn-default">Buscar</button>
            </form>
        </div>

        <!-- Table -->
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Documento</th>
                    <th>Tipo</th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Direccion</th>
                    <th>Correo</th>
                    <th>Celular</th>
                </tr>
            </thead>
            <tbody id="tabla">
                <tr class="info">
                    <td>1193428015</td>
                    <td>cc</td>
                    <td>Juan</td>
                    <td>Perez</td>
                    <td>cr 34</td>
                    <td>jnP@c.om</td>
                    <td>225</td>
                </tr>
                <tr>
                    <td>123</td>
                    <td>cc</td>
                    <td>Juan</td>
                    <td>Perez</td>
                    <td>cr 34</td>
                    <td>jnP@c.om</td>
                    <td>225</td>
                </tr>
                <tr class="info">
                    <td>1193428015</td>
                    <td>cc</td>
                    <td>Juan</td>
                    <td>Perez</td>
                    <td>cr 34</td>
                    <td>jnP@c.om</td>
                    <td>225</td>
                </tr>
            </tbody>
        </table>
    </div>
    <script src="./js/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script>
        // Handler para el evento de respuesta de la peticiÃ³n
        const traerTipo = async () => {
            const response = await fetch('http://localhost:3000/api/tipodoc')
            const data = await response.json()

            console.log(data)
            var miTipo = document.getElementById('tipos');

            for (let i = 0; i < data.length; i++) {
                miTipo.innerHTML += crearTipo(data[i])
            }
        }
        traerTipo()

        function crearTipo(tipo) {
            return `<option value="${tipo[0]}">${tipo[1]}</option>`
        }

        e.preventDefault();
    </script>
    <script>
        const traerPersonas = async () => {
            const response = await fetch('http://localhost:3000/api/personas')
            const data = await response.json()

            console.log(data)
            var miTabla = document.getElementById('tabla');

            for (let i = 0; i < data.length; i++) {
                miTabla.innerHTML += crearPersona(data[i])
            }
        }
        traerPersonas()

        function crearPersona(datoPersona) {
            return `<tr id="persona">
                    <td>${datoPersona[0]}</td>
                    <td>${datoPersona[1]}</td>
                    <td>${datoPersona[2]}</td>
                    <td>${datoPersona[3]}</td>
                    <td>${datoPersona[4]}</td>
                    <td>${datoPersona[5]}</td>
                    <td>${datoPersona[6]}</td>
                </tr>`
        }

        e.preventDefault();
    </script>

    <script>

        document.querySelector("form").addEventListener("submit", function (e) {
            
            const traerPersonasr = async () => {
                const response = await fetch(`http://localhost:3000/api/personas/${}`)
                const data = await response.json()

                console.log(data)
                var miTabla = document.getElementById('tabla');

                for (let i = 0; i < data.length; i++) {
                    miTabla.innerHTML += crearPersona(data[i])
                }
            }
        })


        function crearPersona(datoPersona) {
                return `<tr id="persona">
                    <td>${datoPersona[0]}</td>
                    <td>${datoPersona[1]}</td>
                    <td>${datoPersona[2]}</td>
                    <td>${datoPersona[3]}</td>
                    <td>${datoPersona[4]}</td>
                    <td>${datoPersona[5]}</td>
                    <td>${datoPersona[6]}</td>
                </tr>`
            }

        e.preventDefault();
    </script>

</body>

</html>